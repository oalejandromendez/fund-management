<div class="p-4">

    <mat-card class="shadow-lg rounded-2xl">

        <mat-card-header class="flex items-center justify-between">
            <mat-card-title class="text-2xl font-bold">Mis suscripciones</mat-card-title>
        </mat-card-header>

        <mat-card-content class="!mt-4">
            @if(user() && (user()?.subscriptions ?? []).length > 0) {
            <div>
                <table mat-table [dataSource]="subscriptions()" matSort class="mat-elevation-z8 w-full">

                    <ng-container matColumnDef="name">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header
                            class="bg-gray-200 text-gray-700 font-semibold">
                            Nombre
                        </th>
                        <td mat-cell *matCellDef="let element"> {{ element.name }} </td>
                    </ng-container>

                    <ng-container matColumnDef="amount">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header
                            class="bg-gray-200 text-gray-700 font-semibold">
                            Monto
                        </th>
                        <td mat-cell *matCellDef="let element"> {{ element.minAmount | money }} </td>

                    </ng-container>

                    <ng-container matColumnDef="category">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header
                            class="bg-gray-200 text-gray-700 font-semibold">
                            Categoría
                        </th>
                        <td mat-cell *matCellDef="let element"> {{ element.category}} </td>
                    </ng-container>

                    <ng-container matColumnDef="notification">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header
                            class="bg-gray-200 text-gray-700 font-semibold">
                            Método de Notificación
                        </th>
                        <td mat-cell *matCellDef="let element">
                            {{ element.notificationMethod === 'email' ? 'Correo electrónico' : 'Mensaje de texto' }}
                        </td>

                    </ng-container>



                    <ng-container matColumnDef="date">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header
                            class="bg-gray-200 text-gray-700 font-semibold">
                            Fecha de Suscripción
                        </th>
                        <td mat-cell *matCellDef="let element"> {{ element.date | date:'dd/MM/yyyy' }} </td>
                    </ng-container>

                    <ng-container matColumnDef="actions">
                        <th mat-header-cell *matHeaderCellDef class="bg-gray-200 text-gray-700 font-semibold"> Acciones
                        </th>
                        <td mat-cell *matCellDef="let element">
                            <div class="flex">
                                <button mat-icon-button (click)="onCancel(element)" matTooltip="Cancelar Suscripción">
                                    <mat-icon class="!text-[#ff2300]">cancel</mat-icon>
                                </button>
                            </div>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>

            </div>
            } @else {
            <h1 class="text-gray-800">
                Actualmente no tienes suscripciones a ningun fondo.
            </h1>
            }

        </mat-card-content>

    </mat-card>
</div>